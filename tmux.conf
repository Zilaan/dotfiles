# Author: Raman Haddad

# vim: foldmethod=marker
# vim: foldcolumn=3

# Settings and bindings {{{1
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# Windows index at 1
set -g base-index 1
set -g pane-base-index 1
set -s escape-time 0

# Vim mode
setw -g mode-keys vi
unbind p
bind p paste-buffer

# Copy mode
unbind-key -t vi-copy v
bind-key -t vi-copy 'v' begin-selection # Begin selection in copy mode.
bind-key -t vi-copy 'C-v' rectangle-toggle # Begin selection in copy mode.
bind-key -t vi-copy 'y' copy-selection # Yank selection in copy mode.

# use UTF8
#set -g utf8
# set-window-option -g utf8 on

# Make tmux display things in 256 colors
set -g default-terminal "xterm-256color"

# set scrollback history to 10000 (10k)
set -g history-limit 10000

# Enable mouse control
set -g mouse on

# Reload ~/.tmux.conf using PREFIX r
bind r source-file ~/.tmux.conf \; display "Reloaded!"

# Create panes
bind | split-window -h
bind - split-window -v

# Make the current window the first window
bind T swap-window -t 1

# Map Vi movement keys as pane movement keys
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Resize panes using PREFIX H, J, K, L
bind H resize-pane -L 2
bind J resize-pane -D 2
bind K resize-pane -U 2
bind L resize-pane -R 2
# }}}

# Colors {{{1
# Set pane colors - hilight the active pane
set-option -g pane-border-fg colour235 #base02
set-option -g pane-active-border-fg colour240 #base01

# Colorize messages in the command line
set-option -g message-bg black #base02
set-option -g message-fg brightred #orange

# Set default shell
# set -g default-command /usr/bin/fish
set -g default-command /bin/bash
# }}}

# Plugins {{{1
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'arcticicestudio/nord-tmux'
#set -g @plugin 'tmux-plugins/tmux-sidebar'
#set -g @plugin 'tmux-plugins/tmux-yank'
#set -g @plugin 'tmux-plugins/tmux-resurrect'
#set -g @plugin 'a-morales/stylux'
#set -g @plugin 'tmux-plugins/tmux-sensible'


# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
#function vimf
#  if fzf > $TMPDIR/fzf.result
#    vim (cat $TMPDIR/fzf.result)
#  end
#end
#
#function fe
#  set tmp $TMPDIR/fzf.result
#  fzf --query="$argv[1]" --select-1 --exit-0 > $tmp
#  if [ (cat $tmp | wc -l) -gt 0 ]
#    vim (cat $tmp)
#  end
#end
# }}}

# Status bar {{{1
#- set-option -g status-bg black
#- set-option -g status-fg blue
#- set-option -g status-interval 1
#- set-option -g visual-activity on
#- set-window-option -g monitor-activity on
#- set-window-option -g window-status-current-fg white
#- 
#- # Some variables
#- TAR=""
#- BAR=""
#- BAL=""
#- 
#- red=colour1
#- green=colour2
#- yellow=colour3
#- blue=colour4
#- purple=colour5
#- turq=colour39
#- grey=colour144
#- 
#- set -g status-justify "left"
#- set -g status "on"
#- set -g status-left-style "none"
#- set -g message-command-style "fg=$grey,bg=black"
#- set -g status-right-style "none"
#- set -g pane-active-border-style "fg=$green"
#- set -g status-style "bg=black,none"
#- set -g message-style "fg=$grey,bg=black"
#- set -g pane-border-style "fg=black"
#- set -g status-right-length "100"
#- set -g status-left-length "100"
#- setw -g window-status-activity-attr "none"
#- setw -g window-status-activity-style "fg=$green,bg=black,none"
#- setw -g window-status-separator ""
#- setw -g window-status-style "fg=$turq,bg=black,none"
#-  set -g status-left "#[fg=black,bg=$red] S.#S #[fg=$red,bg=black]$BAR"
#- 
#-  set -g status-right "#[fg=white,bg=black]$BAL#[fg=black,bg=white]#(tmux_charge) #(acpi -V | head -1 | cut -f 2 -d ',') #(tmux_bat)#[fg=black,bg=white]$BAL#[fg=$purple,bg=black]$BAL#[fg=black,bg=$purple] ↑ #(uptime | awk '{print $3 $4}' | awk -F "," '{print $1}') #[fg=black,bg=$purple]$BAL#[fg=$blue,bg=black]$BAL#[fg=black,bg=$blue] %H:%M %Z #[fg=black,bg=$blue]$BAL#[fg=$yellow,bg=black]$BAL#[fg=black,bg=$yellow] %a %d %b %Y #[fg=black,bg=$yellow]$BAL#[fg=$green,bg=black]$BAL#[fg=black,bg=$green] v.%V #[fg=black,bg=$green]$BAL#[fg=$red,bg=black]$BAL#[fg=black, bg=$red] "
#- 
#-  setw -g window-status-format "#[fg=black,bg=$green]$BAR #[fg=black,bg=$green]#I #[fg=black,bg=$green]$TAR #W#[fg=$green,bg=black]$BAR"
#- 
#-  setw -g window-status-current-format "#[fg=black,bg=$purple]$BAR#[fg=black,bg=$purple] [#I.#P] #[fg=black,bg=$purple]$TAR#[fg=$red,bg=$purple] #W #[fg=$purple,bg=black]$BAR"
# }}}

# List of variables {{{1
# #S Session
# #I Window
# #W Running program?
# #d Day (dd)
# #m Month (mm)
# #Y Year (YYYY)
# #H Hour (HH)
# #M Minute (MM)
# #V Week number
# #h User? (Raman)
# }}}
# 
set -g pane-border-fg colour8
set -g pane-active-border-fg colour1

run '~/.tmux/plugins/tpm/tpm'
